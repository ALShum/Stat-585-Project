<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>Introduction</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>




</head>

<body>
<h1>Introduction</h1>

<p>The American Community Survey (ACS) is a yearly demographic survey given to a subset of US households.  There are a few different methods the public can use to access data from the ACS.  One method is using Easystats <a href="http://www.census.gov/easystats/">http://www.census.gov/easystats/</a> which displays data tables for a few selected categories of variables.  The variables available from <a href="http://www.census.gov/easystats/">http://www.census.gov/easystats/</a> are a small subset of all available variables from the American Community Survey and the main goal of Easystats is to give a small example of the type of data available using from the American Community Survey that is easy to access.  The main problem with Easystats is that the data is not presented in a tidy format and we feel there are more interesting examples of the type of data available from the ACS.</p>

<p>The Census Bureau also has an online API that allows access to a larger portion of ACS.  Using the 2012 5-year summaries we collected demographic variables we feel were more interesting and formatted them into a tidy format.  We present the data in a shiny app and give some simple graphic summaries of the data and allow the data to be downloaded by the user.  The different demographic variables available include age, sex, median income, food stamps status, healthcare, employment, poverty status, and university enrollment for each state.</p>

<p>Our Shiny app has some simple graphical summaries of our demographic variables using ggplot and rCharts.  The main purpose is simply to show some examples of the type of demographic data available and what can be done with the data as presented.  If the user wants to use the data for analytic purposes then the data is available to download in a tidied format. </p>

<h1>Cleaning</h1>

<p>Data is accessed from the Census Bureau&#39;s online API using the acs package in R.  The ACS dataset from the online API can be accessed for state, county, census tract or other geographic regions.  Our shiny app accesses demographic variables from the ACS by state.  The data from its original form from the ACS is not in a tidy format.   In a tidy format the rows of the dataset are observations and the columns are variables.  The data from the ACS has columns that store categorical information.  The following is a subset of one of the variables available from our shiny app:</p>

<pre><code class="r">library(acs)
</code></pre>

<pre><code>## 
## Attaching package: &#39;acs&#39;
## 
## The following object is masked from &#39;package:base&#39;:
## 
##     apply
</code></pre>

<pre><code class="r">states = geo.make(state = &quot;*&quot;)
age = acs.fetch(endyear = 2012, span = 5, geography = states, table.number = &quot;B01001&quot;, 
    col.names = &quot;pretty&quot;)
age.df = data.frame(age@estimate)
head(age.df[, 1:5])
</code></pre>

<pre><code>##            Sex.by.Age..Total. Sex.by.Age..Male.
## Alabama               4777326           2317520
## Alaska                 711139            370127
## Arizona               6410979           3187926
## Arkansas              2916372           1431252
## California           37325068          18561020
## Colorado              5042853           2529614
##            Sex.by.Age..Male..Under.5.years Sex.by.Age..Male..5.to.9.years
## Alabama                             155901                         157239
## Alaska                               27900                          25610
## Arizona                             232450                         226788
## Arkansas                            100520                         101399
## California                         1300557                        1278085
## Colorado                            175053                         177899
##            Sex.by.Age..Male..10.to.14.years
## Alabama                              163024
## Alaska                                26565
## Arizona                              232415
## Arkansas                             100461
## California                          1319653
## Colorado                             169678
</code></pre>

<p>This dataset is gender by age for each state.  Each state is an observation but gender, a categorical variable, is encoded into the different columns.  In fact, each column stores information about two different categorical variables: age group and gender.  Using the reshape2 and plyr packages, regular expressions and string splits it is possible to bring this dataset into a tidy format:</p>

<pre><code class="r">library(reshape2)
library(plyr)
</code></pre>

<pre><code>## Warning: package &#39;plyr&#39; was built under R version 3.0.3
</code></pre>

<pre><code class="r">names(age.df) = gsub(&quot;Sex.by.Age..&quot;, &quot;&quot;, names(age.df))

age.df = age.df[, -c(1, 2, 26)]
age.df$state = rownames(age.df)
rownames(age.df) = NULL

age.df$Male..15.to.19.years = age.df[, 4] + age.df[, 5]
age.df$Female..15.to.19.years = age.df[, 27] + age.df[, 28]

age.df$Male..20.to.24.years = age.df[, 6] + age.df[, 7] + age.df[, 8]
age.df$Female..20.to.24.years = age.df[, 29] + age.df[, 30] + age.df[, 31]

age.df$Male..60.to.64.years = age.df[, 16] + age.df[, 17]
age.df$Female..60.to.64.years = age.df[, 39] + age.df[, 40]

age.df$Male..65.to.69.years = age.df[, 18] + age.df[, 19]
age.df$Female..65.to.69.years = age.df[, 41] + age.df[, 42]

age.df = age.df[, -c(4:8, 16:19, 27:31, 39:42)]

age.melt = melt(age.df, id = &quot;state&quot;)
agecols = ldply(strsplit(as.character(age.melt$variable), &quot;\\.\\.&quot;))
names(agecols) = c(&quot;gender&quot;, &quot;age&quot;)
agesex = data.frame(state = age.melt$state, gender = agecols$gender, age = agecols$age, 
    freq = age.melt$value)
agesex$age = factor(agesex$age, levels(agesex$age)[c(18, 9, 1:8, 10:17)])
levels(agesex$age) = gsub(&quot;.years&quot;, &quot;&quot;, levels(agesex$age))

head(agesex)
</code></pre>

<pre><code>##        state gender     age    freq
## 1    Alabama   Male Under.5  155901
## 2     Alaska   Male Under.5   27900
## 3    Arizona   Male Under.5  232450
## 4   Arkansas   Male Under.5  100520
## 5 California   Male Under.5 1300557
## 6   Colorado   Male Under.5  175053
</code></pre>

<p>For this particular dataset we also cleaned up how the age groups are organized.  A similar reshape and cleaning operation was performed on each of the available datasets from our shiny app.  Due to the organizational structure of the datasets it was difficult to completely automate the cleaning process.  Different tables had differing number of variables and were organized slightly differently.  Due to the inconsistent nature of the dataset, it was difficult to completely automate the cleaning and reshaping process and this was done manually.  </p>

<p>The biggest challenge in cleaning and reshaping the datasets were how the column names were formatted.  Recall that categorical variables were often encoded in the column headers.  For example, one of our variables had the following as a column header: &ldquo;Sex.by.Age.by.Employment.Status.for.the.Population.16.Years.and.over..Female..75.years.and.over..Not.in.labor.force&rdquo;.  This column header has categorical information on gender, age group, and labor force status.  The useful categorical data is separated by &ldquo;..&rdquo; and in this example this column header is for women over 75 not in the labor force.  We were able to use a string split on &ldquo;..&rdquo; to separate these column headers and parse the useful information.  Due to the fact that each dataset had a differing number of categorical variables and differing number of &ldquo;..&rdquo;, we had to clean many datasets by hand.</p>

<p>Another difficulty in automating the cleaning process was that occassionally related information would be located in different tables.  For example, one of the variables available from our shiny app looks at food stamp status by race and state.  In fact each race had it&#39;s own data table that had to be accessed separately from the online API.</p>

<p>The Census Bureau&#39;s online API also gives access to margin of errors but this was not used in our datasets.  It is possible to produce confidence intervals and statistical tests using these margin of errors but our focus was to display the types of data available from the ACS and not to draw any conclusions about demographics. </p>

<p>The dataset in the final tidy format is what was released to the users who use our shiny application.  We wanted users to be able to look at a few selected interesting variables in a tidy format without deep knowledge of the ACS, programming skills and knowledge of the Census Bureau&#39;s online API.</p>

<h1>Shiny</h1>

<p>Our shiny application consists of two main parts: data explorer and graphical summaries.  The data explorer displays the dataset with options to filter by variable and the option to download the dataset as a CSV.  The graphical summaries are examples of what can be done with the tidied dataset. </p>

<p>The Data Explorer allows users to see the data set in a tidy format and gives them the ability to select the number of rows to display and sort the data using any of the variables.  It also allows users to filter what rows they are looking at based on different categorical variables shown at the bottom of the table.  From this view the user can also download the entire table as a .csv or .tsv allowing them to perform their own analytics on the data set.</p>

<p>The Visualization Summaries view also allows users to view a sample of a few visualizations based on the dataset that they have selected.  The visuals that are displayed are generated using ggplot2 and rCharts.  We used ggplot2 to generate choropleths and rCharts to generate stacked bar charts.  rCharts allows limited user interaction by displaying information when the user hovers their mouse over different segments of the bar chart.  </p>

<p>Shiny allows graphics from many different libraries.  It is possible to use graphics from ggplot2, rCharts, ggvis and animint in Shiny.  We chose to use ggplot2 and rCharts due to the available types of plots and the level of difficulty in implementing the graphics into shiny.  ggvis graphics have interactivity but not as many graphical options as ggplot2 and animint has interactivity and more plotting options but does not have built-in functions to display easily in shiny.</p>

<p>Part of the challenge for building the shiny application was integrating both ggplot2 and rCharts.  It was a bit difficult to integrate the two since they used different functions in shiny to display the plots.  Additionally, we used conditionalPanels to display different plots for different datasets and we discovered that conditionalPanels were buggy.  One strange bug we discovered was that the ordering of conditionalPanels mattered.  We had conditionalPanels that displayed rCharts and conditionalPanels that displayed ggplots.  If our conditionalPanels for rCharts came after the conditionalPanels for ggplots then we had a bug where the conditionalPanels were not evaluating the conditions properly.  However, if we put the conditionalPanels for rCharts before the conditionalPanels for ggplot then the conditions were properly triggered.</p>

<h1>Future work</h1>

<p>There are many different aspects of this project that we wish to expand upon and continue doing work and perhaps present at the data expo.  It would be nice if we keep looking at different tables with acs.lookup to try and eventually come up with a function that can work for any table and produce a tidy dataset.  Most likely that dataset will have certain columns that are not useful and extra rows that correspond to totals.  However, it would be much easier to simply filter those out instead of starting from scratch every time you want to look at a new table.</p>

<p>A lot of the different work that we want to keep developing has to do with shiny.  For example having a better way for users to examine the table of data and get a better feel for what is going on.  Also we want to have more interactive graphics within a particular dataset allowing users to subset on state, gender, age, etc.  and producing plots for each of those.  This will allow users to more easily see differences between certain categorical variables which as of now we can not display from our shiny application.</p>

</body>

</html>

